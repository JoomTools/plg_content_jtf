"use strict";var jtfUploadFile=function(e,t){for(var d=window.Joomla||{},i=window.mimelite||{},c="",r="",a=e.querySelector(".allowedExt"),n=e.querySelector(".dragarea"),l=document.querySelector("#"+t.id),p=e.querySelector(".upload-list"),o=document.querySelector('label[for="'+t.id+'"'),s=l.getAttribute("accept").split(","),f=t.uploadMaxSize,t=d.Text._("JTF_JS_UPLOAD_ALLOWED_FILES_EXT",""),v=d.Text._("JTF_JS_UPLOAD_ERROR_MESSAGE_SIZE",""),_=d.Text._("JTF_JS_UPLOAD_ERROR_FILE_NOT_ALLOWED",""),u=0,g="";u<s.length;++u){var E=i.getType(s[u].replace(".","")),L=i.getExtension(s[u].replace(".",""));null===E&&(E=i.getTypes(s[u].replace(".",""))),null!==(L=null===L?s[u].replace(".",""):L)&&(r+=(g=r?",":"")+L,"zip"===L&&(c+=g+"application/x-zip-compressed")),null!==E&&(c+=(g=c?",":"")+E)}r="."+r.replace(/,/g," ."),c=c.replace(/,/g," "),a.innerHTML=t+r;function S(){o.classList.add("invalid"),o.setAttribute("aria-invalid",!0),null!==n&&n.classList.add("invalid"),l.classList.add("invalid"),l.setAttribute("aria-invalid",!0)}function m(){o.classList.remove("invalid"),o.setAttribute("aria-invalid",!1),null!==n&&n.classList.remove("invalid"),l.classList.remove("invalid"),l.setAttribute("aria-invalid",!1)}function T(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=t?1e3:1024;if(Math.abs(e)<i)return e+" B";for(var r=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=-1;e/=i,++a,Math.abs(e)>=i&&a<r.length-1;);return e.toFixed(1)+" "+r[a]}function y(e){for(var t={},i=[],r=[],a="",n="",e=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].size;return t}(t=(void 0!==e.originalEvent?e.originalEvent:e).target.files),l=0,o=1;l<t.length;l++,o++){var s,u="<strong>"+o+". "+(s=t[l]).name+"</strong> ";i.push(u+"("+T(s.size)+")"),function(e){if(e&&new RegExp(e).test(c))return!0;return!1}(s.type)||r.push(u+"- "+_)}f<e&&r.push("<strong>"+T(e)+"</strong> - "+v),0<i.length&&(a=d.Text._("JTF_JS_UPLOAD_LIST_WRAPPER_"+jtfFrwk,"").replace("%s","<p>"+i.join("<br />")+"</p>"),m(),document.formvalidator.setHandler("file",function(){return!0})),0<r.length&&(n=d.Text._("JTF_JS_ERROR_WRAPPER_"+jtfFrwk,"").replace("%s","<p>"+r.join("<br />")+"</p>"),S(),document.formvalidator.setHandler("file",function(){return!1})),p.innerHTML=n+a}var A;o&&n&&(A=o.classList.contains("invalid"),new MutationObserver(function(e){e.forEach(function(e){"class"===e.attributeName&&(e=e.target.classList.contains("invalid"),A!==e&&((A=e)?S:m)())})}).observe(o,{attributes:!0})),void 0!==l&&l.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation(),y(e)},!1)},jtfDomIsReady=window.jtfDomIsReady||{},jtfFrwk=window.jtfFrwk||"BS2";jtfDomIsReady(function(){var e=document.querySelectorAll(".uploader-wrapper");Array.prototype.forEach.call(e,function(e){jtfUploadFile(e,{id:e.querySelector('input[type="file"].file-uplaoder').getAttribute("id"),uploadMaxSize:e.querySelector('input[type="hidden"].file-uplaoder').getAttribute("value")})})});