"use strict";var jtfUploadFile=function(e,t){for(var s=window.Joomla||{},i=window.mimelite||{},d="",n="",r=e.querySelector(".allowedExt"),a=e.querySelector(".dragarea"),l=document.querySelector("#"+t.id),c=e.querySelector(".upload-list"),o=document.querySelector('label[for="'+t.id+'"'),u=l.getAttribute("accept").split(","),f=t.uploadMaxSize,t=s.Text._("JTF_JS_UPLOAD_ALLOWED_FILES_EXT",""),p=s.Text._("JTF_JS_UPLOAD_ERROR_MESSAGE_SIZE",""),v=s.Text._("JTF_JS_UPLOAD_ERROR_FILE_NOT_ALLOWED",""),_=0,g="";_<u.length;++_){var E=i.getType(u[_]),L=i.getExtension(u[_]);null===E&&(E=i.getTypes(u[_])),null!==(L=null===L?u[_].replace(".",""):L)&&(n+=(g=n?",":"")+L,"zip"===L&&(d+=g+"application/x-zip-compressed")),null!==E&&(d+=(g=d?",":"")+E)}n=n.replace(/,/g," ."),d=d.replace(/,/g," "),r.innerHTML=t+n;function S(){o.classList.add("invalid"),o.setAttribute("aria-invalid",!0),null!==a&&a.classList.add("invalid"),l.classList.add("invalid"),l.setAttribute("aria-invalid",!0)}function T(){o.classList.remove("invalid"),o.setAttribute("aria-invalid",!1),null!==a&&a.classList.remove("invalid"),l.classList.remove("invalid"),l.setAttribute("aria-invalid",!1)}function A(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=t?1e3:1024;if(Math.abs(e)<i)return e+" B";for(var n=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=-1;e/=i,++r,Math.abs(e)>=i&&r<n.length-1;);return e.toFixed(1)+" "+n[r]}function B(e){for(var t={},i=[],n=[],r="",a="",e=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].size;return t}(t=(void 0!==e.originalEvent?e.originalEvent:e).target.files),l=0;l<t.length;l++,0){var o,u="<strong>"+(o=t[l]).name+"</strong> ";i.push("<li>"+u+"("+A(o.size)+")</li>"),function(e){if(e&&new RegExp(e).test(d))return!0;return!1}(o.type)||n.push(u+"- "+v)}f<e&&n.push("<li><strong>"+A(e)+"</strong> - "+p+"</li>"),0<i.length&&(r=s.Text._("JTF_JS_UPLOAD_LIST_WRAPPER_"+jtfFrwk,"").replace("%s","<ol>"+i.join("")+"</ol>"),T(),document.formvalidator.setHandler("file",function(){return!0})),0<n.length&&(a=s.Text._("JTF_JS_ERROR_WRAPPER_"+jtfFrwk,"").replace("%s",n.join("<br />")),S(),document.formvalidator.setHandler("file",function(){return!1})),c.innerHTML=a+r}var m;o&&a&&(m=o.classList.contains("invalid"),new MutationObserver(function(e){e.forEach(function(e){"class"===e.attributeName&&(e=e.target.classList.contains("invalid"),m!==e&&((m=e)?S:T)())})}).observe(o,{attributes:!0})),void 0!==l&&l.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation(),B(e)},!1)},jtfFrwk=window.jtfFrwk||"BS2";document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".uploader-wrapper");Array.prototype.forEach.call(e,function(e){jtfUploadFile(e,{id:e.querySelector('input[type="file"].file-uplaoder').getAttribute("id"),uploadMaxSize:e.querySelector('input[type="hidden"].file-uplaoder').getAttribute("value")})})});