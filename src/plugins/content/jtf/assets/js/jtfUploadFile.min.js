"use strict";var jtfUploadFile=function(e,t){for(var i=window.Joomla||{},r=window.mimelite||{},a="",n="",l=e.querySelector(".allowedExt"),o=e.querySelector(".dragarea"),s=document.querySelector("#"+t.id),u=e.querySelector(".upload-list"),d=document.querySelector('label[for="'+t.id+'"'),c=s.getAttribute("accept").split(","),f=t.uploadMaxSize,p=i.Text._("JTF_JS_UPLOAD_ALLOWED_FILES_EXT",""),v=i.Text._("JTF_JS_UPLOAD_ERROR_MESSAGE_SIZE",""),_=i.Text._("JTF_JS_UPLOAD_ERROR_FILE_NOT_ALLOWED",""),g=0,E="";g<c.length;++g){var L=r.getType(c[g].replace(".","")),S=r.getExtension(c[g].replace(".",""));null===L&&(L=r.getTypes(c[g].replace(".","")));null===S&&(S=c[g].replace(".",""));if(null!==S){n+=(E=n?",":"")+S;"zip"===S&&(a+=E+"application/x-zip-compressed")}null!==L&&(a+=(E=a?",":"")+L)}n="."+n.replace(/,/g," .");a=a.replace(/,/g," ");l.innerHTML=p+n;var m=function(e){if(e){if(new RegExp(e).test(a))return!0}return!1},T=function(){d.classList.add("invalid");d.setAttribute("aria-invalid",!0);o.classList.add("invalid");s.classList.add("invalid");s.setAttribute("aria-invalid",!0)},y=function(){d.classList.remove("invalid");d.setAttribute("aria-invalid",!1);o.classList.remove("invalid");s.classList.remove("invalid");s.setAttribute("aria-invalid",!1)},A=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t?1e3:1024;if(Math.abs(e)<i)return e+" B";var r=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=-1;do{e/=i;++a}while(Math.abs(e)>=i&&a<r.length-1);return e.toFixed(1)+" "+r[a]};if(d&&o){var B=d.classList.contains("invalid");new MutationObserver((function(e){e.forEach((function(e){if("class"===e.attributeName){var t=e.target.classList.contains("invalid");if(B!==t){B=t;t?T():y()}}}))})).observe(d,{attributes:!0})}void 0!==s&&s.addEventListener("change",(function(e){e.preventDefault();e.stopPropagation();!function(e){for(var t,r={},a=[],n=[],l="",o="",s=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].size;return t}(r=void 0!==e.originalEvent?e.originalEvent.target.files:e.target.files),d=0,c=1;d<r.length;d++,c++){var p="<strong>"+c+". "+(t=r[d]).name+"</strong> ";a.push(p+"("+A(t.size)+")");m(t.type)||n.push(p+"- "+_)}s>f&&n.push("<strong>"+A(s)+"</strong> - "+v);if(a.length>0){l=i.Text._("JTF_JS_UPLOAD_LIST_WRAPPER_"+jtfFrwk,"").replace("%s","<p>"+a.join("<br />")+"</p>");y();document.formvalidator.setHandler("file",(function(){return!0}))}if(n.length>0){o=i.Text._("JTF_JS_ERROR_WRAPPER_"+jtfFrwk,"").replace("%s","<p>"+n.join("<br />")+"</p>");T();document.formvalidator.setHandler("file",(function(){return!1}))}u.innerHTML=o+l}(e)}),!1)},jtfDomIsReady=window.jtfDomIsReady||{},jtfFrwk=window.jtfFrwk||"BS2";jtfDomIsReady((function(){var e=document.querySelectorAll(".uploader-wrapper");Array.prototype.forEach.call(e,(function(e){jtfUploadFile(e,{id:e.querySelector('input[type="file"].file-uplaoder').getAttribute("id"),uploadMaxSize:e.querySelector('input[type="hidden"].file-uplaoder').getAttribute("value")})}))}));