"use strict";var jtfUploadFile=function(e,t){for(var d=window.Joomla||{},i=window.mimelite||{},c="",r="",n=e.querySelector(".allowedExt"),a=e.querySelector(".dragarea"),l=document.querySelector("#"+t.id),p=e.querySelector(".upload-list"),o=document.querySelector('label[for="'+t.id+'"'),u=l.getAttribute("accept").split(","),f=t.uploadMaxSize,t=d.Text._("JTF_JS_UPLOAD_ALLOWED_FILES_EXT",""),v=d.Text._("JTF_JS_UPLOAD_ERROR_MESSAGE_SIZE",""),_=d.Text._("JTF_JS_UPLOAD_ERROR_FILE_NOT_ALLOWED",""),s=0,g="";s<u.length;++s){var E=i.getType(u[s].replace(".","")),L=i.getExtension(u[s].replace(".",""));null===E&&(E=i.getTypes(u[s].replace(".",""))),null!==(L=null===L?u[s].replace(".",""):L)&&(r+=(g=r?",":"")+L,"zip"===L&&(c+=g+"application/x-zip-compressed")),null!==E&&(c+=(g=c?",":"")+E)}r="."+r.replace(/,/g," ."),c=c.replace(/,/g," "),n.innerHTML=t+r;function S(){o.classList.add("invalid"),o.setAttribute("aria-invalid",!0),null!==a&&a.classList.add("invalid"),l.classList.add("invalid"),l.setAttribute("aria-invalid",!0)}function T(){o.classList.remove("invalid"),o.setAttribute("aria-invalid",!1),null!==a&&a.classList.remove("invalid"),l.classList.remove("invalid"),l.setAttribute("aria-invalid",!1)}function A(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=t?1e3:1024;if(Math.abs(e)<i)return e+" B";for(var r=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],n=-1;e/=i,++n,Math.abs(e)>=i&&n<r.length-1;);return e.toFixed(1)+" "+r[n]}function B(e){for(var t={},i=[],r=[],n="",a="",e=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].size;return t}(t=(void 0!==e.originalEvent?e.originalEvent:e).target.files),l=0,o=1;l<t.length;l++,o++){var u,s="<strong>"+o+". "+(u=t[l]).name+"</strong> ";i.push(s+"("+A(u.size)+")"),function(e){if(e&&new RegExp(e).test(c))return!0;return!1}(u.type)||r.push(s+"- "+_)}f<e&&r.push("<strong>"+A(e)+"</strong> - "+v),0<i.length&&(n=d.Text._("JTF_JS_UPLOAD_LIST_WRAPPER_"+jtfFrwk,"").replace("%s","<p>"+i.join("<br />")+"</p>"),T(),document.formvalidator.setHandler("file",function(){return!0})),0<r.length&&(a=d.Text._("JTF_JS_ERROR_WRAPPER_"+jtfFrwk,"").replace("%s","<p>"+r.join("<br />")+"</p>"),S(),document.formvalidator.setHandler("file",function(){return!1})),p.innerHTML=a+n}var m;o&&a&&(m=o.classList.contains("invalid"),new MutationObserver(function(e){e.forEach(function(e){"class"===e.attributeName&&(e=e.target.classList.contains("invalid"),m!==e&&((m=e)?S:T)())})}).observe(o,{attributes:!0})),void 0!==l&&l.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation(),B(e)},!1)},jtfFrwk=window.jtfFrwk||"BS2";document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".uploader-wrapper");Array.prototype.forEach.call(e,function(e){jtfUploadFile(e,{id:e.querySelector('input[type="file"].file-uplaoder').getAttribute("id"),uploadMaxSize:e.querySelector('input[type="hidden"].file-uplaoder').getAttribute("value")})})});