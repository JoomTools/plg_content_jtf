let jtfUploadFile=(e,t)=>{let i=window.Joomla||{},l=window.mimelite||{},r="",a="";const n=e.querySelector(".allowedExt"),o=e.querySelector(".dragarea"),s=document.querySelector("#"+t.id),d=e.querySelector(".upload-list"),u=document.querySelector('label[for="'+t.id+'"'),p=s.getAttribute("accept").split(","),c=t.uploadMaxSize,f=i.Text._("JTF_JS_UPLOAD_ALLOWED_FILES_EXT",""),_=i.Text._("JTF_JS_UPLOAD_ERROR_MESSAGE_SIZE",""),g=i.Text._("JTF_JS_UPLOAD_ERROR_FILE_NOT_ALLOWED","");for(let e=0,t="";e<p.length;++e){let i=l.getType(p[e].replace(".","")),n=l.getExtension(p[e].replace(".",""));null===i&&(i=l.getTypes(p[e].replace(".","")));null===n&&(n=p[e].replace(".",""));if(null!==n){t=a?",":"";a+=t+n;"zip"===n&&(r+=t+"application/x-zip-compressed")}if(null!==i){t=r?",":"";r+=t+i}}a="."+a.replace(/,/g," .");r=r.replace(/,/g," ");n.innerHTML=f+a;let v=e=>{if(e){if(new RegExp(e).test(r))return!0}return!1},E=()=>{u.classList.add("invalid");u.setAttribute("aria-invalid",!0);o.classList.add("invalid");s.classList.add("invalid");s.setAttribute("aria-invalid",!0)},L=()=>{u.classList.remove("invalid");u.setAttribute("aria-invalid",!1);o.classList.remove("invalid");s.classList.remove("invalid");s.setAttribute("aria-invalid",!1)},S=(e,t=!0)=>{let i=t?1e3:1024;if(Math.abs(e)<i)return e+" B";let l=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=-1;do{e/=i;++r}while(Math.abs(e)>=i&&r<l.length-1);return e.toFixed(1)+" "+l[r]};if(u&&o){let e=u.classList.contains("invalid");new MutationObserver(t=>{t.forEach(t=>{if("class"===t.attributeName){let i=t.target.classList.contains("invalid");if(e!==i){e=i;i?E():L()}}})}).observe(u,{attributes:!0})}void 0!==s&&s.addEventListener("change",e=>{e.preventDefault();e.stopPropagation();(e=>{let t={},l=[],r=[],a="",n="";t=void 0!==e.originalEvent?e.originalEvent.target.files:e.target.files;let o=(e=>{let t=0;for(let i,l=0;l<e.length;l++){i=e[l];t+=i.size}return t})(t);for(let e,i=0,a=1;i<t.length;i++,a++){e=t[i];let n="<strong>"+a+". "+e.name+"</strong> ";l.push(n+"("+S(e.size)+")");v(e.type)||r.push(n+"- "+g)}o>c&&r.push("<strong>"+S(o)+"</strong> - "+_);if(l.length>0){a=i.Text._("JTF_JS_UPLOAD_LIST_WRAPPER_"+jtfFrwk,"").replace("%s","<p>"+l.join("<br />")+"</p>");L();document.formvalidator.setHandler("file",()=>!0)}if(r.length>0){n=i.Text._("JTF_JS_ERROR_WRAPPER_"+jtfFrwk,"").replace("%s","<p>"+r.join("<br />")+"</p>");E();document.formvalidator.setHandler("file",()=>!1)}d.innerHTML=n+a})(e)},!1)},jtfDomIsReady=window.jtfDomIsReady||{},jtfFrwk=window.jtfFrwk||"BS2";jtfDomIsReady(()=>{let e=document.querySelectorAll(".uploader-wrapper");Array.prototype.forEach.call(e,(function(e){jtfUploadFile(e,{id:e.querySelector('input[type="file"].file-uplaoder').getAttribute("id"),uploadMaxSize:e.querySelector('input[type="hidden"].file-uplaoder').getAttribute("value")})}))});